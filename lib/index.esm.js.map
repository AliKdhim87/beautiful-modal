{"version":3,"file":"index.esm.js","sources":["../src/components/portal/index.tsx","../src/components/Modal/index.tsx"],"sourcesContent":["import React, {useMemo, useEffect} from 'react'\nimport ReactDOM from 'react-dom'\n\ninterface PortalProps {\n  children?: React.ReactNode\n  parent?: HTMLElement\n  className?: string\n}\n\nconst Portal: React.FC<PortalProps> = ({children, parent, className}) => {\n  const el = useMemo(() => document.createElement('div'), [])\n\n  useEffect(() => {\n    const target = parent && parent.appendChild ? parent : document.body\n\n    const classList = ['__pretty-modal__']\n    if (className) className.split(' ').forEach((item: string) => classList.push(item))\n\n    classList.forEach(item => el.classList.add(item))\n\n    target.appendChild(el)\n    return () => {\n      target.removeChild(el)\n    }\n  }, [el, parent, className])\n  return ReactDOM.createPortal(children, el)\n}\n\nexport default Portal\n","import React, {useEffect, useState, useRef} from 'react'\nimport styled, {createGlobalStyle} from 'styled-components'\nimport 'wicg-inert'\n\nimport Portal from '../portal'\n\nconst GlobalStyles = createGlobalStyle`\n  html {\n    --pretty-modal-backdrop-background-color: rgba(0, 0, 0, 0.5);\n    --pretty-modal-backdrop-backdrop-filter: blur(1px);\n    --pretty-modal-backdrop-transition: all 100ms;\n    --pretty-modal-backdrop-transition-delay: 200ms;\n    --pretty-modal-backdrop-display: flex;\n    --pretty-modal-backdrop-align-items: center;\n    --pretty-modal-backdrop-justify-content: center;\n    --pretty-modal-backdrop-padding: 30px 0;\n\n    --pretty-modal-modal-container-transform: translateY(-10rem);\n    --pretty-modal-modal-container-transition: all 200ms;\n    --pretty-modal-modal-container-padding: 20px;\n    --pretty-modal-modal-container-min-height: 50px;\n    --pretty-modal-modal-container-min-width: 50px;\n    --pretty-modal-modal-container-max-width: 80%;\n    --pretty-modal-modal-container-max-height: 100%;\n    --pretty-modal-modal-container-box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n    --pretty-modal-modal-container-background-color: #fff;\n    --pretty-modal-modal-container-border-radius: 2px;\n\n    --pretty-modal-active-transition-duration: 250ms;\n    --pretty-modal-active-transition-delay: 0ms;\n\n    --pretty-modal-active-modal-container-transform: translateX(0);\n    --pretty-modal-active-modal-container-transition-delay: 150ms;\n    --pretty-modal-active-modal-container-transition-duration: 350ms;\n  }\n`\n\nconst Backdrop = styled.div`\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background-color: var(--pretty-modal-backdrop-background-color);\n  backdrop-filter: var(--pretty-modal-backdrop-backdrop-filter);\n  opacity: 0;\n  transition: var(--pretty-modal-backdrop-transition);\n  transition-delay: var(--pretty-modal-backdrop-transition-delay);\n  display: var(--pretty-modal-backdrop-display);\n  align-items: var(--pretty-modal-backdrop-align-items);\n  justify-content: var(--pretty-modal-backdrop-justify-content);\n  padding: var(--pretty-modal-backdrop-padding);\n\n  & .modal-container {\n    transform: var(--pretty-modal-modal-container-transform);\n    transition: var(--pretty-modal-modal-container-transition);\n    opacity: 0;\n  }\n\n  &.active {\n    transition-duration: var(--pretty-modal-active-transition-duration);\n    transition-delay: var(--pretty-modal-active-transition-delay);\n    opacity: 1;\n\n    & .modal-container {\n      transform: var(--pretty-modal-active-modal-container-transform);\n      opacity: 1;\n      transition-delay: var(--pretty-modal-active-modal-container-transition-delay);\n      transition-duration: var(--pretty-modal-active-modal-container-transition-duration);\n    }\n  }\n`\n\nconst ModalContainer = styled.div`\n  position: relative;\n  padding: var(--pretty-modal-modal-container-padding);\n  box-sizing: border-box;\n  min-height: var(--pretty-modal-modal-container-min-height);\n  min-width: var(--pretty-modal-modal-container-min-width);\n  max-width: var(--pretty-modal-modal-container-max-width);\n  max-height: var(--pretty-modal-modal-container-max-height);\n  box-shadow: var(--pretty-modal-modal-container-box-shadow);\n  background-color: var(--pretty-modal-modal-container-background-color);\n  border-radius: var(--pretty-modal-modal-container-border-radius);\n  overflow-y: auto;\n  overflow-x: hidden;\n`\ninterface ModalProps {\n  /**\n   *  Where you can add the modal elements\n   */\n  children?: React.ReactNode\n  /**\n   *  When it's true it will open the modal\n   */\n  open?: boolean\n  /**\n   * Callback fired when the Modal is requested to be closed by a click on the overlay or when user press esc key\n   */\n  onClose?: () => void\n  /**\n   * When it's true it will prevent close the modal when you click on the backdrop of the close button\n   */\n  locked?: boolean\n  /**\n   * You can specify the parent of the modal where you can render the portal by default it will create a div\n   */\n  parent?: HTMLElement\n  /**\n   * You can add class the the parent dev\n   */\n  parentClass?: string\n}\n\nconst Modal: React.FC<ModalProps> = ({\n  children,\n  open,\n  onClose,\n  locked,\n  parent,\n  parentClass,\n}: ModalProps) => {\n  const [active, setActive] = useState<boolean | undefined>(false)\n\n  const backdrop = useRef<HTMLDivElement | null>(null)\n\n  useEffect(() => {\n    const {current} = backdrop\n    const root = document.querySelector('#root')\n\n    const transitionEnd = () => setActive(open)\n\n    const keyHandler = (event: {which: number}) =>\n      !locked && [27].indexOf(event.which) >= 0 && onClose ? onClose() : undefined\n\n    const clickHandler = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) =>\n      !locked && e.target === current && onClose ? onClose() : undefined\n\n    if (current) {\n      current && current.addEventListener('transitionend', transitionEnd)\n      current.addEventListener('click', clickHandler as any)\n      window.addEventListener('keyup', keyHandler)\n    }\n\n    if (open) {\n      window.setTimeout(() => {\n        ;(document.activeElement as HTMLElement).blur()\n        setActive(open)\n        if (root) {\n          root.setAttribute('inert', 'true')\n        }\n      }, 10)\n    }\n\n    return () => {\n      if (current) {\n        current.removeEventListener('transitionend', transitionEnd)\n        current.removeEventListener('click', clickHandler as any)\n      }\n      if (root) {\n        root.removeAttribute('inert')\n      }\n      window.removeEventListener('keyup', keyHandler)\n    }\n  }, [open, locked, onClose])\n\n  return (\n    <React.Fragment>\n      <GlobalStyles />\n      {(open || active) && (\n        <Portal parent={parent} className={parentClass}>\n          <Backdrop ref={backdrop} className={active && open ? 'active' : ''}>\n            <ModalContainer className=\"modal-container\">{children}</ModalContainer>\n          </Backdrop>\n        </Portal>\n      )}\n    </React.Fragment>\n  )\n}\n\nexport default Modal\n"],"names":["Portal","children","parent","className","el","useMemo","document","createElement","useEffect","target","appendChild","body","classList","split","forEach","item","push","add","removeChild","ReactDOM","createPortal","GlobalStyles","createGlobalStyle","Backdrop","styled","div","ModalContainer","Modal","open","onClose","locked","parentClass","active","setActive","useState","backdrop","useRef","current","root","querySelector","transitionEnd","keyHandler","event","indexOf","which","undefined","clickHandler","e","addEventListener","window","setTimeout","activeElement","blur","setAttribute","removeEventListener","removeAttribute","React","Fragment","ref"],"mappings":"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"}