{"version":3,"file":"index.cjs.js","sources":["../src/components/portal/index.tsx","../src/components/Modal/index.tsx"],"sourcesContent":["import React, {useMemo, useEffect} from 'react'\nimport ReactDOM from 'react-dom'\n\ninterface PortalProps {\n  children?: React.ReactNode\n  parent?: HTMLElement\n  className?: string\n}\n\nconst Portal: React.FC<PortalProps> = ({children, parent, className}) => {\n  const el = useMemo(() => document.createElement('div'), [])\n\n  useEffect(() => {\n    const target = parent && parent.appendChild ? parent : document.body\n\n    const classList = ['__pretty-modal__']\n    if (className) className.split(' ').forEach((item: string) => classList.push(item))\n\n    classList.forEach(item => el.classList.add(item))\n\n    target.appendChild(el)\n    return () => {\n      target.removeChild(el)\n    }\n  }, [el, parent, className])\n  return ReactDOM.createPortal(children, el)\n}\n\nexport default Portal\n","import React, {useEffect, useState, useRef} from 'react'\nimport styled, {createGlobalStyle} from 'styled-components'\nimport 'wicg-inert'\n\nimport Portal from '../portal'\n\nconst GlobalStyles = createGlobalStyle`\n  html {\n    --pretty-modal-backdrop-background-color: rgba(0, 0, 0, 0.5);\n    --pretty-modal-backdrop-backdrop-filter: blur(1px);\n    --pretty-modal-backdrop-transition: all 100ms;\n    --pretty-modal-backdrop-transition-delay: 200ms;\n    --pretty-modal-backdrop-display: flex;\n    --pretty-modal-backdrop-align-items: center;\n    --pretty-modal-backdrop-justify-content: center;\n    --pretty-modal-backdrop-padding: 30px 0;\n\n    --pretty-modal-modal-container-transform: translateY(-10rem);\n    --pretty-modal-modal-container-transition: all 200ms;\n    --pretty-modal-modal-container-padding: 20px;\n    --pretty-modal-modal-container-min-height: 50px;\n    --pretty-modal-modal-container-min-width: 50px;\n    --pretty-modal-modal-container-max-width: 80%;\n    --pretty-modal-modal-container-max-height: 100%;\n    --pretty-modal-modal-container-box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n    --pretty-modal-modal-container-background-color: #fff;\n    --pretty-modal-modal-container-border-radius: 2px;\n\n    --pretty-modal-active-transition-duration: 250ms;\n    --pretty-modal-active-transition-delay: 0ms;\n\n    --pretty-modal-active-modal-container-transform: translateX(0);\n    --pretty-modal-active-modal-container-transition-delay: 150ms;\n    --pretty-modal-active-modal-container-transition-duration: 350ms;\n  }\n`\n\nconst Backdrop = styled.div`\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background-color: var(--pretty-modal-backdrop-background-color);\n  backdrop-filter: var(--pretty-modal-backdrop-backdrop-filter);\n  opacity: 0;\n  transition: var(--pretty-modal-backdrop-transition);\n  transition-delay: var(--pretty-modal-backdrop-transition-delay);\n  display: var(--pretty-modal-backdrop-display);\n  align-items: var(--pretty-modal-backdrop-align-items);\n  justify-content: var(--pretty-modal-backdrop-justify-content);\n  padding: var(--pretty-modal-backdrop-padding);\n\n  & .modal-container {\n    transform: var(--pretty-modal-modal-container-transform);\n    transition: var(--pretty-modal-modal-container-transition);\n    opacity: 0;\n  }\n\n  &.active {\n    transition-duration: var(--pretty-modal-active-transition-duration);\n    transition-delay: var(--pretty-modal-active-transition-delay);\n    opacity: 1;\n\n    & .modal-container {\n      transform: var(--pretty-modal-active-modal-container-transform);\n      opacity: 1;\n      transition-delay: var(--pretty-modal-active-modal-container-transition-delay);\n      transition-duration: var(--pretty-modal-active-modal-container-transition-duration);\n    }\n  }\n`\n\nconst ModalContainer = styled.div`\n  position: relative;\n  padding: var(--pretty-modal-modal-container-padding);\n  box-sizing: border-box;\n  min-height: var(--pretty-modal-modal-container-min-height);\n  min-width: var(--pretty-modal-modal-container-min-width);\n  max-width: var(--pretty-modal-modal-container-max-width);\n  max-height: var(--pretty-modal-modal-container-max-height);\n  box-shadow: var(--pretty-modal-modal-container-box-shadow);\n  background-color: var(--pretty-modal-modal-container-background-color);\n  border-radius: var(--pretty-modal-modal-container-border-radius);\n  overflow-y: auto;\n  overflow-x: hidden;\n`\ninterface ModalProps {\n  /**\n   *  Where you can add the modal elements\n   */\n  children?: React.ReactNode\n  /**\n   *  When it's true it will open the modal\n   */\n  open?: boolean\n  /**\n   * Callback fired when the Modal is requested to be closed by a click on the overlay or when user press esc key\n   */\n  onClose?: () => void\n  /**\n   * When it's true it will prevent close the modal when you click on the backdrop of the close button\n   */\n  locked?: boolean\n  /**\n   * You can specify the parent of the modal where you can render the portal by default it will create a div\n   */\n  parent?: HTMLElement\n  /**\n   * You can add class the the parent dev\n   */\n  parentClass?: string\n}\n\nconst Modal: React.FC<ModalProps> = ({\n  children,\n  open,\n  onClose,\n  locked,\n  parent,\n  parentClass,\n}: ModalProps) => {\n  const [active, setActive] = useState<boolean | undefined>(false)\n\n  const backdrop = useRef<HTMLDivElement | null>(null)\n\n  const root = document.querySelector('#root')\n\n  useEffect(() => {\n    const {current} = backdrop\n\n    const transitionEnd = () => setActive(open)\n\n    const keyHandler = (event: {which: number}) =>\n      !locked && [27].indexOf(event.which) >= 0 && onClose ? onClose() : undefined\n\n    const clickHandler = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) =>\n      !locked && e.target === current && onClose ? onClose() : undefined\n\n    if (current) {\n      current && current.addEventListener('transitionend', transitionEnd)\n      current.addEventListener('click', clickHandler as any)\n      window.addEventListener('keyup', keyHandler)\n    }\n\n    if (open) {\n      window.setTimeout(() => {\n        ;(document.activeElement as HTMLElement).blur()\n        setActive(open)\n        if (root) {\n          root.setAttribute('inert', 'true')\n        }\n      }, 10)\n    }\n\n    return () => {\n      if (current) {\n        current.removeEventListener('transitionend', transitionEnd)\n        current.removeEventListener('click', clickHandler as any)\n      }\n      if (root) {\n        root.removeAttribute('inert')\n      }\n      window.removeEventListener('keyup', keyHandler)\n    }\n  }, [open, locked, onClose])\n\n  return (\n    <React.Fragment>\n      <GlobalStyles />\n      {(open || active) && (\n        <Portal parent={parent} className={parentClass}>\n          <Backdrop ref={backdrop} className={active && open ? 'active' : ''}>\n            <ModalContainer className=\"modal-container\">{children}</ModalContainer>\n          </Backdrop>\n        </Portal>\n      )}\n    </React.Fragment>\n  )\n}\n\nexport default Modal\n"],"names":["useMemo","useEffect","ReactDOM","createGlobalStyle","styled","useState","useRef","React"],"mappings":"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"}