{"version":3,"file":"index.cjs.js","sources":["../src/components/portal/index.tsx","../src/components/Modal/index.tsx"],"sourcesContent":["import React, {useMemo, useEffect} from 'react'\nimport ReactDOM from 'react-dom'\n\ninterface PortalProps {\n  children?: React.ReactNode\n  parent?: string\n  className?: string\n}\n\nconst Portal: React.FC<PortalProps> = ({children, parent, className}) => {\n  const el = useMemo(() => document.createElement('div'), [])\n\n  useEffect(() => {\n    const target = parent ? document.querySelector(parent) : document.body\n\n    const classList = ['__pretty-modal__']\n    if (className) className.split(' ').forEach((item: string) => classList.push(item))\n\n    classList.forEach(item => el.classList.add(item))\n\n    target?.appendChild(el)\n    return () => {\n      target?.removeChild(el)\n    }\n  }, [el, parent, className])\n  return ReactDOM.createPortal(children, el)\n}\n\nexport default Portal\n","import React, {useEffect, useState, useRef} from 'react'\nimport styled, {createGlobalStyle} from 'styled-components'\nimport {disableBodyScroll, enableBodyScroll, clearAllBodyScrollLocks} from 'body-scroll-lock'\nimport FocusTrap from 'focus-trap-react'\n\nimport Portal from '../portal'\n\nconst GlobalStyles = createGlobalStyle`\n  html {\n    --pretty-modal-backdrop-background-color: rgba(0, 0, 0, 0.5);\n    --pretty-modal-backdrop-backdrop-filter: blur(1px);\n    --pretty-modal-backdrop-transition: all 100ms;\n    --pretty-modal-backdrop-transition-delay: 200ms;\n    --pretty-modal-backdrop-display: flex;\n    --pretty-modal-backdrop-align-items: center;\n    --pretty-modal-backdrop-justify-content: center;\n    --pretty-modal-backdrop-padding: 30px 0;\n\n    --pretty-modal-modal-container-transform: translateY(-10rem);\n    --pretty-modal-modal-container-transition: all 200ms;\n    --pretty-modal-modal-container-padding: 20px;\n    --pretty-modal-modal-container-min-height: 50px;\n    --pretty-modal-modal-container-min-width: 50px;\n    --pretty-modal-modal-container-max-width: 80%;\n    --pretty-modal-modal-container-max-height: 100%;\n    --pretty-modal-modal-container-box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);\n    --pretty-modal-modal-container-background-color: #fff;\n    --pretty-modal-modal-container-border-radius: 2px;\n\n    --pretty-modal-active-transition-duration: 250ms;\n    --pretty-modal-active-transition-delay: 0ms;\n\n    --pretty-modal-active-modal-container-transform: translateX(0);\n    --pretty-modal-active-modal-container-transition-delay: 150ms;\n    --pretty-modal-active-modal-container-transition-duration: 350ms;\n  }\n`\n\nconst Backdrop = styled.div`\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background-color: var(--pretty-modal-backdrop-background-color);\n  backdrop-filter: var(--pretty-modal-backdrop-backdrop-filter);\n  opacity: 0;\n  transition: var(--pretty-modal-backdrop-transition);\n  transition-delay: var(--pretty-modal-backdrop-transition-delay);\n  display: var(--pretty-modal-backdrop-display);\n  align-items: var(--pretty-modal-backdrop-align-items);\n  justify-content: var(--pretty-modal-backdrop-justify-content);\n  padding: var(--pretty-modal-backdrop-padding);\n\n  & .modal-container {\n    transform: var(--pretty-modal-modal-container-transform);\n    transition: var(--pretty-modal-modal-container-transition);\n    opacity: 0;\n  }\n\n  &.active {\n    transition-duration: var(--pretty-modal-active-transition-duration);\n    transition-delay: var(--pretty-modal-active-transition-delay);\n    opacity: 1;\n\n    & .modal-container {\n      transform: var(--pretty-modal-active-modal-container-transform);\n      opacity: 1;\n      transition-delay: var(--pretty-modal-active-modal-container-transition-delay);\n      transition-duration: var(--pretty-modal-active-modal-container-transition-duration);\n    }\n  }\n`\n\nconst ModalContainer = styled.div`\n  position: relative;\n  padding: var(--pretty-modal-modal-container-padding);\n  box-sizing: border-box;\n  min-height: var(--pretty-modal-modal-container-min-height);\n  min-width: var(--pretty-modal-modal-container-min-width);\n  max-width: var(--pretty-modal-modal-container-max-width);\n  max-height: var(--pretty-modal-modal-container-max-height);\n  box-shadow: var(--pretty-modal-modal-container-box-shadow);\n  background-color: var(--pretty-modal-modal-container-background-color);\n  border-radius: var(--pretty-modal-modal-container-border-radius);\n  overflow-y: auto;\n  overflow-x: hidden;\n`\ninterface ModalProps {\n  /**\n   *  Where you can add the modal elements\n   */\n  children?: React.ReactNode\n  /**\n   *  When it's true it will open the modal\n   */\n  open?: boolean\n  /**\n   * Callback fired when the Modal is requested to be closed by a click on the overlay or when user press esc key\n   */\n  onClose?: () => void\n  /**\n   * When it's true it will prevent close the modal when you click on the backdrop of the close button\n   */\n  locked?: boolean\n  /**\n   * You can specify the parent of the modal where you can render it.\n   */\n  parent?: string\n  /**\n   * You can add class the the parent dev\n   */\n  parentClass?: string\n  /**\n   * Gives the dialog an accessible name by referring to the element that provides the dialog title\n   */\n  ariaLabelledby?: string\n  /**\n   * Gives the dialog an accessible description by referring to the dialog content that describes the primary message or purpose of the dialog.\n   */\n  ariaDescribedby?: string\n}\n\nconst Modal: React.FC<ModalProps> = ({\n  children,\n  open,\n  onClose,\n  locked,\n  parent,\n  parentClass,\n  ariaDescribedby,\n  ariaLabelledby,\n}: ModalProps) => {\n  const [active, setActive] = useState<boolean | undefined>(false)\n  const backdrop = useRef<HTMLDivElement | null>(null)\n\n  const targetRef = React.useRef(null)\n  let targetElement: Element | null = null\n\n  useEffect(() => {\n    const {current} = backdrop\n\n    targetElement = targetRef.current\n    const transitionEnd = () => setActive(open)\n\n    const keyHandler = (event: {which: number}) => {\n      if (!locked && [27].indexOf(event.which) >= 0 && onClose) {\n        onClose()\n        enableBodyScroll(targetElement as HTMLElement | Element)\n      }\n    }\n\n    const clickHandler = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n      if (!locked && e.target === current && onClose) {\n        onClose()\n        enableBodyScroll(targetElement as HTMLElement | Element)\n      }\n    }\n\n    if (current) {\n      current && current.addEventListener('transitionend', transitionEnd)\n      current.addEventListener('click', clickHandler as any)\n      window.addEventListener('keyup', keyHandler)\n    }\n\n    if (open) {\n      window.setTimeout(() => {\n        ;(document.activeElement as HTMLElement).blur()\n        setActive(open)\n\n        disableBodyScroll(targetElement as HTMLElement | Element)\n      }, 10)\n    }\n\n    return () => {\n      if (current) {\n        current.removeEventListener('transitionend', transitionEnd)\n        current.removeEventListener('click', clickHandler as any)\n      }\n      if (targetRef.current) {\n        clearAllBodyScrollLocks()\n      }\n      window.removeEventListener('keyup', keyHandler)\n    }\n  }, [open, locked, onClose])\n\n  return (\n    <React.Fragment>\n      <GlobalStyles />\n      {(open || active) && (\n        <Portal parent={parent} className={parentClass}>\n          <FocusTrap>\n            <Backdrop ref={backdrop} className={active && open ? 'active' : ''}>\n              <ModalContainer\n                ref={targetRef}\n                role=\"dialog\"\n                aria-modal={open}\n                className=\"modal-container\"\n                aria-describedby={ariaDescribedby}\n                aria-labelledby={ariaLabelledby}\n              >\n                {children}\n              </ModalContainer>\n            </Backdrop>\n          </FocusTrap>\n        </Portal>\n      )}\n    </React.Fragment>\n  )\n}\n\nexport default Modal\n"],"names":["Portal","children","parent","className","el","useMemo","document","createElement","useEffect","target","querySelector","body","classList","split","forEach","item","push","add","appendChild","removeChild","ReactDOM","createPortal","GlobalStyles","createGlobalStyle","Backdrop","styled","div","ModalContainer","Modal","open","onClose","locked","parentClass","ariaDescribedby","ariaLabelledby","active","setActive","useState","backdrop","useRef","targetRef","React","targetElement","current","transitionEnd","keyHandler","event","indexOf","which","enableBodyScroll","clickHandler","e","addEventListener","window","setTimeout","activeElement","blur","disableBodyScroll","removeEventListener","clearAllBodyScrollLocks","Fragment","FocusTrap","ref","role"],"mappings":"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"}